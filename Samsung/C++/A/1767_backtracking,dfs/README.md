# 1767. [SW Test 샘플문제] 프로세서 연결하기

[링크](https://swexpertacademy.com/main/code/problem/problemDetail.do?contestProbId=AV4suNtaXFEDFAUf)

난이도\_32%

## 정리

내 코드 : 160 ms;
빠른 코드 : 2 ms;

dfs를 이용해 4방향 + 제외 = 5가지 경우를 전부 테스트해보는 문제.
시간복잡도 O(5^12) = 244,140,625 가 최대이다.

각 경우에서 dfs를 들어가고 나온 뒤, map의 상태를 초기화 하기 위해 stack의 성질을 이용했다.

```cpp
dfs(){
  ///...

  draw_line()
  dfs()
  erase_line()
}
```

이렇게 할 경우 각 dfs의 호출이 끝난 뒤 지도가 자동으로 복원된다.

각 좌표는 struct axis로 관리했다.

선이 연결 가능한지를 판단하는 함수과, 선을 그리고 지우는 함수 두가지로 나눠서 구현했다.
각 함수에 중복되는 코드가 존재하지만, 머리로 생각한 방법 그대로 구현할 수 있어서 이 쪽이 편한듯 하다.

## 고생한점

### 초기화

전역변수의 초기화에 항상 신경쓰자!
댓글로 토의한 반례는 전부 맞았음에도 max_cells를 초기화하지 않아 문제가 생겼다.

```cpp
solve(){
  clear() // 초기화

  // 문제 풀이...
}
```

이렇게 구현하는 것이 가장 헷갈리지 않는 방법이라고 생각한다.
이렇게 초기화에 대한 문제인지 찾기 위해

1. test_case의 순서를 바꿔서 test해본다.
2. max 혹은 min이 다음에 무조건 갱신될수 밖에 없는 순서로 test 해본다.

### dfs 호출 횟수

4방향 + 제외 = 5가지 경우를 탐색하는 데 visited를 이용해 탐색하지 말자.
즉 제외의 경우를 어렵게 생각하지 말자.
visited를 이용해 예를 들어 5-4-3-6-2-1 순으로 테스트를 하는 경우 중복이 여러번 생긴다.
따라서 중복을 제외하기 위해선 1번부터 6번까지 순차적으로 탐색하면 된다.
(이 경우를 고민을 자주하자)

## 보완할 점

### back tracking

현 코드는 back tracking이 간단하게 (선을 연결할수 없는 경우 건너뜀) 적용되어 있는 상태이다.

시간을 줄이기 위해 떠오르는 아이디어로는

1. wire의 수가 무조건 최소가 될 수 없는 경우 탐색 x
2. core의 수가 무조건 최대가 될 수 없는 경우 탐색 x
