# 1563. 개근상

[링크](https://www.acmicpc.net/problem/1563)

| 난이도  | 정답률(\_%) |
| :-----: | :---------: |
| Gold IV |   49.520    |

## 설계

### 시간복잡도

출석, 지각, 결석 총 3가지 경우가 존재하고 N은 1000 이하이다.

3^1000의 경우를 모두 살펴볼 경우 시간초과가발생하므로 메모이제이션 dp를 이용한다.

### 일반식 설계

dp의 일반식은 다음과 같이 설계한다.

```cpp
int dp[날짜 수][지각 횟수][연속 결석 수]
```

1,000,000으로 나눈 나머지를 저장하므로 int형으로 충분하다.

dp를 이용한 방법은 2가지가 존재한다.

- dp[0][0][0]으로 수렴시키기
- 1부터 시작해 dp[N]에서의 값을 모두 더하기

### dp[0][0][0]으로 수렴

dp에 채울 수 있는 가능한 경우의 수는 0 이상의 정수가 가능하므로,
배열의 초기값은 0이 아닌 음수로 설정한다.

```cpp
void init() { memset(dp, -1, sizeof(dp)); }
```

지각의 총 누적횟수가 2회 이상이거나, 연속 결석 수가 3인 경우 가능한 경우의 수는 0이므로 0을 리턴한다.

또한 N번 출석한 경우 결석수와 지각수는 0임이 보장되므로 가능한 경우는 한가지이다.

현재 경우에서 가능한 수는 출석한 경우, 지각을 한번 더 한 경우, 결석한 경우로 총 3가지이다.

```cpp
int fill_dp(int attendance, int late, int absent) {
  if (late >= 2 || absent >= 3) {
    return 0;
  }
  if (attendance == N) {
    return 1;
  }

  if (dp[attendance][late][absent] != -1) {
    return dp[attendance][late][absent];
  }

  return dp[attendance][late][absent] =
             (fill_dp(attendance + 1, late, 0) +            // 출석한 경우
              fill_dp(attendance + 1, late + 1, 0) +        // 지각한 경우
              fill_dp(attendance + 1, late, absent + 1)) %  // 결석한 경우
             DIV;
}
```

### 1부터 시작

dp에 저장하는 값을 출석 일수를 증가시키며 가능한 경우의 수를 누적시키는 방향으로 설정한다.

1일차에서 dp의 초기값은 다음과 같다.

```cpp
void init() {
  dp[0][0][0] = 1;
  dp[1][0][0] = 1;
  dp[1][0][1] = 1;
  dp[1][1][0] = 1;
}
```

이전 일수에 관계 없이 현재 가능한 경우의 수는 다음 3가지 경우에 따라 다르다.

```cpp
// 오늘 출석

dp[출석일수][지각수][0] =
  dp[출석일수-1][지각수][0] + dp[출석일수-1][지각수][1] + dp[출석일수-1][지각수][2]

// 오늘 지각
dp[출석일수][1][0] =
  dp[출석일수-1][0][0] + dp[출석일수-1][0][1] + dp[출석일수-1][0][2]

// 오늘 결석
dp[출석일수][0][2] = dp[출석일수-1][0][1]
dp[출석일수][0][1] = dp[출석일수-1][0][0]
dp[출석일수][1][2] = dp[출석일수-1][1][1]
dp[출석일수][1][1]= d p[출석일수-1][1][1]
```

출석 일수를 2부터 N까지 증가시키며 dp배열을 채우면 dp[N]에 가능한 경우의 수들이 누적된다.

이를 전부 더한 값이 가능한 경우의 수의 총 집합이다.

```cpp
for (int i = 0; i < 2; i++) {
  for (int j = 0; j < 3; j++) {
    answer += dp[N][i][j];
  }
}
answer %= DIV;
```

## 정리

| 내 코드 (ms) | 빠른 코드 (ms) |
| :----------: | :------------: |
|      0       |       0        |

## 고생한 점
